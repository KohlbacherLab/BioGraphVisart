<!doctype html>
<html>
<head>
	<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> 
    <title>BioGraphVisart</title>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/basic/jquery.qtip.js"></script>
	
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/basic/jquery.qtip.css">

  	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js" integrity="sha384-THVO/sM0mFD9h7dfSndI6TS0PgAGavwKvB5hAxRRvc0o9cPLohB0wb/PTA7LdUHs" crossorigin="anonymous"></script>



	<script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/1ebdad7d2d5ee59906b8c89227d3f92e0288bbb5/static/scripts/d3.v3.min.js"></script> 
	<script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/1ebdad7d2d5ee59906b8c89227d3f92e0288bbb5/static/scripts/html2canvas.min.js"></script>

	<script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/1ebdad7d2d5ee59906b8c89227d3f92e0288bbb5/static/scripts/cytoscape.js"></script> 
	<script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/1ebdad7d2d5ee59906b8c89227d3f92e0288bbb5/static/scripts/cytoscape-qtip.js"></script> 
	<script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/d0da0e8e85c6d843c8aa61b8757c0f64284e889f/static/scripts/dagre.js"></script>
    <script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/d0da0e8e85c6d843c8aa61b8757c0f64284e889f/static/scripts/klay.js"></script>
	    <script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/0c9cc853db108c578a21b69d6887c7bb022e8669/static/scripts/cytoscape-klay.js"></script>
    <script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/d0da0e8e85c6d843c8aa61b8757c0f64284e889f/static/scripts/cytoscape-cose-bilkent.js"></script>
    <script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/526efb1e4554f21fc2321ee5061203eeac335012/static/scripts/cytoscape-dagre.js"></script>
	    <script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/5604c2d6f4e7bfbd653f680cdc98fe4424abe4d2/static/scripts/cytoscape-canvas.js"></script>
<script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/e6e0bbd9e50242167ab1dcfc85f5546e2c493201/static/scripts/cxtmenu.js"></script>
<script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/e6e0bbd9e50242167ab1dcfc85f5546e2c493201/static/scripts/cytoscape-undo-redo.js"></script>

	<script type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/1ebdad7d2d5ee59906b8c89227d3f92e0288bbb5/static/scripts/cytoscape-no-overlap.js"></script>
    <script src="https://unpkg.com/file-saver@1.3.8/FileSaver.js"></script>
    <script src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/1ebdad7d2d5ee59906b8c89227d3f92e0288bbb5/static/scripts/cytoscape-svg.js"></script>

	<script data-main="https://raw.githack.com/MirjamFi/BioGraphVisart/master/static/scripts/initialize.js" type="application/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/1ebdad7d2d5ee59906b8c89227d3f92e0288bbb5/static/scripts/node_modules/requirejs/require.js"></script>
    <script type="text/javascript" src="https://raw.githack.com/MirjamFi/BioGraphVisart/master/static/scripts/commonfunctions.js"></script>
    <script type="text/javascript" src="https://raw.githack.com/MirjamFi/BioGraphVisart/master/static/scripts/constants.js"></script>
    <script type="text/javascript" src="https://raw.githack.com/MirjamFi/BioGraphVisart/master/static/scripts/download_single_graph.js"></script>
    <script type="text/javascript" src="https://raw.githack.com/MirjamFi/BioGraphVisart/master/static/scripts/keggpathways.js"></script>

	<script type="text/javascript" src="https://rawcdn.githack.com/MirjamFi/BioGraphVisart/master/static/legends/interactiontypes.js"></script>

	<script type="application/javascript" src="https://raw.githack.com/MirjamFi/BioGraphVisart/master/static/scripts/icons.js"></script>
	<script type="application/javascript" src="https://raw.githack.com/MirjamFi/BioGraphVisart/master/static/scripts/graph.js"></script>	   	
	<link rel="stylesheet" type="text/css" href="https://raw.githack.com/MirjamFi/BioGraphVisart/master/static/css/subgraphCss.css">
	   	
	
</head>


<body id="everything">
	<script type="text/javascript">
		if (window.File && window.FileReader && window.FileList && window.Blob) {
		  // Great success! All the File APIs are supported.
		} else {
		  alert('The File APIs are not fully supported in this browser.');
		}
	</script>
	<div class="content">
	<div class="topnav" id="nav">
		<div class="topnav-left">
		    <a class="page-link" href="heatmap">Comparison</a>
		</div>
		<div class="topnav-centered">
			<a class="page-link" href="/BioGraphVisart/">BioGraphVisart</a>
		</div>
	    <div class="dropdown topnav-right">
          <button class="dropbtn"><a href="about" class="page-link">About</a>  
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-content">
            <a class="page-link" href="documentation">Documentation</a>
            <a class="page-link" href="contact">Contact</a>
          </div>
      </div>
	</div>
	 <script>
        // Add active class to the current button (highlight it)
        var header = document.getElementById("nav");
        var btns = header.getElementsByClassName("page-link");
        for (var i = 0; i < btns.length; i++) {
          btns[i].addEventListener("click", function() {
          var current = document.getElementsByClassName("active");
          current[0].className = current[0].className.replace(" active", "");
          this.className += " active";
          });
        }
    </script>
	<p id="description" style="text-align: center">BioGraphVisart simplifies the process of analysis and interactive visualization for faster data interpretation of biological networks. It accepts networks from .graphml-files as input.</p>


	<div  class="datapart" id="dataPart">
		<input type="file" accept=".graphml,.jso,.sif" id="fileName" name="file" />

		<button class= 'butn' onclick="isJsonFile()" id="loadGraphml" >Load file</button>
		<button class='butn' onclick="readExample()" id="exampleFile">Example</button>
		<p></p>

	</div> 

	<div id="configPart">
		
	</div>
	<p></p>



	<div id="downloadPart" style="visibility: hidden">
		<input name="outputFile" type="text" maxlength="512" id="outputName" value="Download File name"/>
		<button  class= 'butn' id="downloadPDF" onClick=downloadPDF() disabled="disabled" id="downloadPDF">.pdf</button>
		<button class= 'butn' id="downloadPNG" onclick="downloadPNG()" disabled="disabled">.png</button>
		<button class= 'butn' id="downloadSVG" onclick="downloadSVG()" disabled="disabled">.svg</button>
		<button class= 'butn' id="downloadJSON" onclick="downloadJSON()" disabled="disabled">.json</button>
	</div>
	<!--<button onclick=" window.print()">print</button>-->
	<p></p>
	<div align="left" id="legend" style="visibility: hidden">
		<table >
			<tr>
				<td>
					<span style="font-size:15px" ><b>Interactions</b></span> 
				</td>
				<td>
					<small><a href="https://www.kegg.jp/kegg/xml/docs/" target="_blank">kegg.jp</a></small>
				</td>
			</tr>
		</table>
		<table id="arrows">
		</table>
		<button class= 'butn' id="resetLayout">Reset layout</button>
		<div id="legendNodes"></div>
	</div>
	<div class="loader" id="loader1" style="visibility: hidden"></div>
	<div align="left" id="cy"></div>
	<div align="left" id="KEGGpathsButton" style="visibility: hidden">
		<button class="butn" id="keggpathways">Show KEGG Pathways</button></p></p>
		<div class="loader" id="loader" style="visibility: hidden"></div>
	</div>
	<div align="left" id= "KEGGpaths" style="visibility: hidden;"></div>
	<script type="text/javascript">
			$.get("/vis", function(data){
				if(data){
					var parser = new DOMParser;
					var dom = parser.parseFromString(
					     data,
					    'text/html');

					graphString = []
					var keytag = dom.body.getElementsByTagName("graphml")[0]
					var keys = keytag.outerHTML.split(">  <");
					for(var i = 0; i < keys.length-1; i++){
							if(i != keys.length-2){
							graphString.push('<'+keys[i]+'>')
						}
						else if(i == keys.length-2){
							var nodetag = keys[i].split("<node");
							for(var j = 0; j < nodetag.length; j++){
								if(nodetag[j].includes('id') && j < nodetag.length-1){
									var splitNode = nodetag[j].split('<data')
									for(var k = 0; k < splitNode.length; k++){
										if(splitNode[k].includes('id')){
											graphString.push('<node' + splitNode[k])
										}
										else{
											graphString.push('<data' + splitNode[k].split('</node>')[0])
										}
									}
								}
								if(j == nodetag.length-1){
									var splitEdge = nodetag[j].split('<edge')
									var split = splitEdge[0].split('<data')
									for(var l = 0; l < split.length; l++){
										if(split[l].includes('id')){
											graphString.push('<node' + split[l])
										}
										else{
											graphString.push('<data' + split[l])
										}
									}
									for(var m = 1; m < splitEdge.length; m++){
										var splitedEdge = splitEdge[m].split("<data")
										for(var n =0; n <splitedEdge.length; n++){
											if(splitedEdge[n].includes('source')){
												graphString.push('<edge' + splitedEdge[n])
											}
											else{
												graphString.push('<data' + splitedEdge[n].split('</edge')[0])
											}
										}
										
									}
								}

							}
						}
					}
					loadFile();
				}
			})
		</script>
	</div>

<footer id="footer">
    <div class="containerMerged">
        <a href="imprint">Imprint</a><br>
        <a href="datenschutzerklarung" aria-current="page">Datenschutzerklärung</a>   
    </div>  
</footer>
</body>

</html>
